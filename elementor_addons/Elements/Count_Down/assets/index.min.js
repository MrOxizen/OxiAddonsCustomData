var SaElCountDown = function($scope, $) {
    var $SaCoundDown = $scope.find(".sa_el_countdown_wrapper").eq(0),
        $sacountdown_id =
        $SaCoundDown.data("countdown-id") !== undefined ?
        $SaCoundDown.data("countdown-id") :
        "",
        $expire_type =
        $SaCoundDown.data("expire-type") !== undefined ?
        $SaCoundDown.data("expire-type") :
        "",
        $expiry_text =
        $SaCoundDown.data("expiry-text") !== undefined ?
        $SaCoundDown.data("expiry-text") :
        "",
        $expiry_title =
        $SaCoundDown.data("expiry-title") !== undefined ?
        $SaCoundDown.data("expiry-title") :
        "",
        $redirect_url =
        $SaCoundDown.data("redirect-url") !== undefined ?
        $SaCoundDown.data("redirect-url") :
        "",
        $template =
        $SaCoundDown.data("template") !== undefined ?
        $SaCoundDown.data("template") :
        "";

    jQuery(document).ready(function($) {
        "use strict";
        var countDown = $("#sa_el_countdown_" + $sacountdown_id);

        countDown.countdown({
            end: function() {
                if ($expire_type == "text") {
                    countDown.html(
                        '<div class="sa_el_countdown_finish_message"><h4 class="expiry-title">' +
                        $expiry_title +
                        "</h4>" +
                        '<div class="sa_el_countdown_finish_text">' +
                        $expiry_text +
                        "</div></div>"
                    );
                } else if ($expire_type === "url") {
                    var editMode = $("body").find("#elementor").length;
                    if (editMode > 0) {
                        countDown.html(
                            "Your Page will be redirected to given URL (only on Frontend)."
                        );
                    } else {
                        window.location.href = $redirect_url;
                    }
                } else if ($expire_type === "template") {
                    countDown.html($template);
                } else {
                    /* do nothing! */
                }
            }
        });
    });
};
jQuery(window).on("elementor/frontend/init", function() {
    elementorFrontend.hooks.addAction(
        "frontend/element_ready/sa_el_countdown.default",
        SaElCountDown
    );
});